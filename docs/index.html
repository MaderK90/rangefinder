<!--<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="stylesheet" href="style.css">
    <script src="script.js" async></script>
    <title>Bluetooth LE Test</title>
</head>
<body>
    <div class="wrapper">
        <h2 id="range">(n/a)</h2>
        <h2 id="m2">(n/a)</h2>
        <button id="ButtonConnect" >Connect BlueTooth</button>

        <button id="activateRange">Connect BlueTooth sensor for Range</button>
       
        <br/>
        <div class="wrapper-horizontal">
            <button id="RangeButton" >Measure Distance</button>
         
        </div>
        <div class="wrapper-horizontal">
            <button id="m2Button" >Measure again to get m2</button>
         
        </div>
    </div>
    <script>        
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
    <article>
        <h2>Install App</h2>
        <p>Do you want to install the app locally and for offline use?</p>
        <button data-id="install-yes">Yes</button>
        <button data-id="install-no">No</button>
    </article>
    
</body>
</html>-->


<!DOCTYPE html>
<html>
<head>
  <title>ESP32 Webclient</title>
</head>
<body>
  <h1>ESP32 Webclient</h1>

  <button onclick="connect()">Connect to ESP32</button>

  <h2>Sensor Value:</h2>
  <p id="sensor-value"></p>

  <script>
    // Bluetooth-UUIDs
const SERVICE_UUID = '4fafc201-1fb5-459e-8fcc-c5c9c331914b';
const CHARACTERISTIC_UUID = 'beb5483e-36e1-4688-b7f5-ea07361b26a8';

async function connect() {
  try {
    const device = await navigator.bluetooth.requestDevice({
      filters: [{ services: [SERVICE_UUID] }],
    });

    const server = await device.gatt.connect();
    const service = await server.getPrimaryService(SERVICE_UUID);
    const characteristic = await service.getCharacteristic(CHARACTERISTIC_UUID);

    characteristic.addEventListener('characteristicvaluechanged', handleValueChanged);
    await characteristic.startNotifications();

    console.log('Connected to ESP32!');
  } catch (error) {
    console.log('Error connecting to ESP32: ', error);
  }
}

function handleValueChanged(event) {
  const value = event.target.value;
  const sensorValue = value.getUint8(0);

  // Hier kannst du den Code einf√ºgen, um den Sensorwert im Webclient anzuzeigen.
  document.getElementById('sensor-value').innerText = sensorValue;
}

connect();

  </script>
</body>
</html>